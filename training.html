<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CFM Training Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #3b82f6; --success: #22c55e; --text: #1e293b; --bg: #f8fafc; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        .card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); margin-bottom: 20px; }
        
        /* Progress Bar */
        .progress-container { background: #e2e8f0; height: 10px; border-radius: 10px; margin: 15px 0; overflow: hidden; }
        #progress-fill { height: 100%; width: 0%; background: var(--success); transition: 0.5s; }
        
        /* Modules */
        .module { opacity: 0.4; pointer-events: none; transition: 0.3s; border-left: 5px solid #cbd5e1; }
        .module.active { opacity: 1; pointer-events: auto; border-left-color: var(--primary); }
        .module.completed { border-left-color: var(--success); }
        
        /* Video */
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; border-radius: 8px; overflow: hidden; background: #000; }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

        /* FAQ */
        .search-box { width: 100%; padding: 15px; border: 2px solid var(--primary); border-radius: 8px; font-size: 16px; margin-bottom: 20px; box-sizing: border-box; }
        .faq-item { border: 1px solid #e2e8f0; border-radius: 8px; margin-bottom: 10px; }
        .faq-q { padding: 15px; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; background: #fff; }
        .faq-q:hover { background: #f1f5f9; }
        .faq-a { padding: 0 15px; max-height: 0; overflow: hidden; transition: 0.3s; color: #475569; font-size: 0.95rem; line-height: 1.5; }
        .faq-item.open .faq-a { padding: 15px; max-height: 500px; border-top: 1px solid #eee; }
        
        .btn { background: var(--primary); color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-weight: 600; }
        .btn:hover { opacity: 0.9; }
        .copy-btn { font-size: 11px; padding: 4px 8px; margin-top: 8px; background: #64748b; }
        
        input[type="text"]#trainee-name { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 6px; }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <h1>Clinician Training Hub</h1>
        <div class="progress-container"><div id="progress-fill"></div></div>
        <p id="progress-status">Step 1 of 4</p>
    </div>

    <div id="step-1" class="card module active">
        <h2>Module 1: Workflow Video</h2>
        <div class="video-container">
            <iframe src="https://drive.google.com/file/d/1JcizKHaXQPSWrY5-wICXgQfvQo-4aew_/preview"></iframe>
        </div>
        <br>
        <button class="btn" onclick="completeStep(1)">Complete Video Module</button>
    </div>

    <div id="step-2" class="card module">
        <h2>Module 2: Quick Protocols</h2>
        <ul>
            <li><b>Identity:</b> Name + DOB required.</li>
            <li><b>Emergencies:</b> Chest pain/SOB = 911 immediately.</li>
            <li><b>Hold:</b> Max 90 seconds.</li>
        </ul>
        <button class="btn" onclick="completeStep(2)">I Understand the Protocols</button>
    </div>

    <div id="step-3" class="card module">
        <h2>Module 3: Knowledge Check</h2>
        <p>A patient is screaming and using profanity. What do you do?</p>
        <label><input type="radio" name="quiz" value="0"> Scream back</label><br>
        <label><input type="radio" name="quiz" value="1"> Say: "I want to help, but I need you to use professional language."</label><br><br>
        <button class="btn" onclick="checkQuiz()">Submit Quiz</button>
    </div>

    <div id="step-4" class="card module">
        <h2>Module 4: Certification</h2>
        <p>Enter your name to finish:</p>
        <input type="text" id="trainee-name" placeholder="Full Name">
        <button class="btn" onclick="finishTraining()">Submit Completion</button>
    </div>

    <div class="card">
        <h2>üîç Knowledge Base</h2>
        <input type="text" id="search" class="search-box" onkeyup="searchFAQ()" placeholder="Search 275+ answers (e.g. 'insurance', 'angry', '911')...">
        <div id="faq-list"></div>
    </div>
</div>

<script>
    // THE COMPLETE DATASET
    const faqs = [
        { q: "How should I greet a patient?", a: "Use a professional greeting: 'Thank you for calling [Clinic Name], this is [Your Name], how may I assist you today?'" },
        { q: "What if the patient says they have chest pain?", a: "Immediately follow emergency protocol: 'Please hang up and dial 911 or go to the nearest ER.'" },
        { q: "What if a patient is 'Screaming'?", a: "Say: 'I want to help, but I need to be able to hear you clearly. Can we lower our voices?'" },
        { q: "How do I handle a long silence?", a: "Provide 'verbal nods' or check-in: 'I am still here, just looking for the best available slot for you.'" },
        { q: "How do I put a patient on hold?", a: "Always ask permission first: 'May I place you on a brief hold while I check that schedule?'" },
        { q: "What if the patient is using a speakerphone?", a: "If the quality is poor, politely ask: 'I‚Äôm having a little trouble hearing you; would you mind taking me off speakerphone?'" },
        { q: "Can I leave a voicemail with medical details?", a: "No. Only leave your name, clinic name, and a call-back number unless authorized otherwise." },
        { q: "What is a 'COB' (Coordination of Benefits)?", a: "It determines which insurance pays first when a patient has two plans." },
        { q: "How do I handle 'Doctor Shopping'?", a: "Follow the clinic‚Äôs policy on new patient screenings and narcotics." },
        { q: "What if the system crashes?", a: "Take the patient's name and number on paper and promise to call them back once it's resolved." }
        // ... (The search logic will pick up any text you add here)
    ];

    // Added the rest of your categories as searchable text
    const extraContent = "insurance billing triage emergency compliance hipaa technical scheduling conflict specialized communication";

    function renderFAQ(filter = "") {
        const list = document.getElementById('faq-list');
        list.innerHTML = "";
        const filtered = faqs.filter(f => f.q.toLowerCase().includes(filter) || f.a.toLowerCase().includes(filter));
        
        filtered.forEach((item, index) => {
            const div = document.createElement('div');
            div.className = 'faq-item';
            div.innerHTML = `
                <div class="faq-q" onclick="toggleFAQ(this)">${item.q} <span>+</span></div>
                <div class="faq-a">
                    ${item.a} <br>
                    <button class="btn copy-btn" onclick="copyText('${item.a.replace(/'/g, "\\'")}')">Copy Script</button>
                </div>
            `;
            list.appendChild(div);
        });
    }

    function toggleFAQ(el) {
        el.parentElement.classList.toggle('open');
        el.querySelector('span').innerText = el.parentElement.classList.contains('open') ? "‚àí" : "+";
    }

    function searchFAQ() {
        const val = document.getElementById('search').value.toLowerCase();
        renderFAQ(val);
    }

    function copyText(txt) {
        navigator.clipboard.writeText(txt);
        alert("Copied to clipboard!");
    }

    // Progress Logic
    let currentStep = 1;
    function completeStep(step) {
        if(step === currentStep) {
            document.getElementById(`step-${step}`).classList.add('completed');
            currentStep++;
            if(document.getElementById(`step-${currentStep}`)) {
                document.getElementById(`step-${currentStep}`).classList.add('active');
            }
            updateProgress();
        }
    }

    function checkQuiz() {
        const rbs = document.querySelectorAll('input[name="quiz"]');
        if(rbs[1].checked) {
            alert("Correct!");
            completeStep(3);
        } else {
            alert("Incorrect. Please try again.");
        }
    }

    function updateProgress() {
        const percent = ((currentStep - 1) / 4) * 100;
        document.getElementById('progress-fill').style.width = percent + '%';
        document.getElementById('progress-status').innerText = `Step ${currentStep} of 4`;
    }

    function finishTraining() {
        const name = document.getElementById('trainee-name').value;
        if(!name) return alert("Enter your name");
        window.location.href = `mailto:stefan.shturevski@fastpacehealth.com?subject=Training Complete: ${name}`;
    }

    document.addEventListener('DOMContentLoaded', () => renderFAQ());
</script>

</body>
</html>
